<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Traducteur Vocal</title>
    <style>
        body {
            background: #111;
            color: white;
            font-family: Arial;
            text-align: center;
            padding: 30px;
        }
        select, button {
            font-size: 18px;
            padding: 10px;
            margin-top: 15px;
        }
        #result {
            margin-top: 20px;
            font-size: 22px;
            color: #0f0;
        }
    </style>
</head>
<body>

    <h1>ğŸ¤ Traducteur Vocal Automatique</h1>

    <p>Choisis la langue dans laquelle tu veux que je parle :</p>

    <select id="targetLang">
        <option value="ja-JP">Japonais ğŸ‡¯ğŸ‡µ</option>
        <option value="en-US">Anglais ğŸ‡ºğŸ‡¸</option>
        <option value="ar">Arabe ğŸ‡¸ğŸ‡¦</option>
        <option value="es">Espagnol ğŸ‡ªğŸ‡¸</option>
        <option value="fr-FR">FranÃ§ais ğŸ‡«ğŸ‡·</option>
    </select>

    <br><br>

    <button onclick="startRecording()">ğŸ™ï¸ Parler</button>

    <p id="result"></p>

<script>
    // --- 1. Reconnaissance vocale ---
    const recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
    recognition.lang = "fr-FR";
    recognition.interimResults = false;

    function startRecording() {
        recognition.start();
        document.getElementById("result").innerHTML = "Ã‰coute...";
    }

    recognition.onresult = function(event) {
        const spokenText = event.results[0][0].transcript;
        document.getElementById("result").innerHTML = "Tu as dit : " + spokenText;

        translateText(spokenText);
    };

    // --- 2. Traduction (API gratuite via MyMemory) ---
    function translateText(text) {
        let target = document.getElementById("targetLang").value;
        let shortLang = target.split("-")[0]; // ex: ja-JP â†’ ja

        let url = "https://api.mymemory.translated.net/get?q=" + 
                  encodeURIComponent(text) + 
                  "&langpair=fr|" + shortLang;

        fetch(url)
            .then(response => response.json())
            .then(data => {
                let translated = data.responseData.translatedText;
                document.getElementById("result").innerHTML =
                    "Traduction : " + translated;

                speakText(translated, target);
            });
    }

    // --- 3. SynthÃ¨se vocale ---
    function speakText(text, lang) {
        let msg = new SpeechSynthesisUtterance();
        msg.text = text;
        msg.lang = lang;
        speechSynthesis.speak(msg);
    }
</script>

</body>
</html>
